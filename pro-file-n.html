<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <link rel="stylesheet" href="style/signup.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>

  <script>


    function doPrev(refFile, prevImg) {
      const [file] = refFile.files;
      if (file) {
        prevImg.src = URL.createObjectURL(file)
      }
    }

    //======================================================================================================
    $(document).ready(function () {
      $("#update").fadeOut(1000);

      $("#btnSearch").click(function () {

        // alert();
        var emailKu = $("#txtEmail").val();

        var obj = {
          type: "get",
          url: "/json-rec-donor",
          data: {
            kuchemail: emailKu,
          }
        }

        $.ajax(obj).done(function (respJSONKuch) {

          alert(JSON.stringify(respJSONKuch));
          
          if (respJSONKuch[0].namee != []) {
            alert("go");
            $("#update-id").fadeIn(1000);
            $("#save-id").fadeOut(1000);
            $("#txtnamee").val(respJSONKuch[0].namee);
            $("#txtadd").val(respJSONKuch[0].address);
            $("#txtcity").val(respJSONKuch[0].city);
            $("#txtid").val(respJSONKuch[0].proofid);
            $("#txtpic").val(respJSONKuch[0].picname);
            $("#txtFrom").val(respJSONKuch[0].froma);
            $("#txtTo").val(respJSONKuch[0].toa);
          }
        }).fail(function (errKuch) {
          alert("err");

        })

      });
    });
//========================================================


    /*    var emailKu=$("#txtEmail").val();
        var nameKu=$("#txtname").val();
        var mobileKu=$("#txtmobile").val();
        var dobKu=$("#txtdob").val();
        var addressKu=$("#txtadd").val();
        var cityKu=$("#txtcity").val();
        var genKu=$("#txtgen").val();
        var picKu=$("txtpic").val();
        var obj={
            type:"get",
            url:"/chk-prfn",
            data:{
              kuchEmail:emailKu,
              kuchname:nameKu,
              kuchmobile:mobileKu,
              kuchdob:dobKu,
              kuchaddress:addressKu,
              kuchcity:cityKu,
              kuchgen:genKu,

            }
}
})

$.ajax(obj).done(function(respKuch){

           alert("done");
}).fail(function(){

          alert("faiil");
});
});


$(document).ajaxStart(function(){
      alert("Ajax Started");
      });

      $(document).ajaxStop(function(){
       alert("Ajax stopped");
      });

$("#update").click(doSearch);
{
function doSearch()
{
var emailKu=$("#txtEmail").val();
var objt={
  type:"get",
  url:"/chk-update",
  data:{
    kuchemail:emailKu,

  }
}
}

$.ajax(objt).done(function(respJSONKuch){
  alert(JSON.stringify(respJSONKuch));
  
}).fail(function(respJSONKuch){
         alert("fail");
  })
}*/


  </script>
</head>

<body>
  </head>

  <body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Navbar</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
          aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" id="">Profile</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Pricing</a>
            </li>
            <li class="nav-item">
              <a class="nav-link disabled">Disabled</a>
            </li>
          </ul>
        </div>
      </div>

    </nav>

    <div class="container">
      <p>
        <center>
        </center>
      </p>
      <div class="row">
        <div class="col-md-12">
          <center><img id="wait" src="pics/icons8-loading-infinity.gif" alt=""></center>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6 offset-md-3">
          <form method="post" enctype="multipart/form-data">
            <input type="hidden" id="hdn" name="hdn">
            <p>
              <center>
                <h3>Signup SECURE Form</h3>
              </center>
            </p>
            <div class="mb-3">
              <label for="formGroupExampleInput" class="form-label">Email ID</label>
              <span id="res">*</span>
              <input type="text" class="form-control" value="bce@gmail.com" id="txtEmail" name="txtEmail"
                placeholder="Example input placeholder">

              <input type="button" class="btn btn-primary mt-2" id="btnSearch" value="Search">
            </div>

            <div class="mb-3">
              <label for="formGroupExampleInput2" class="form-label">Name</label>
              <input type="text" class="form-control" value="" id="txtNamee" name="txtNamee"
                placeholder="Another input placeholder">
            </div>
            <div class="mb-3">
              <label for="formGroupExampleInput2" class="form-label">Mobile</label>
              <input type="text" class="form-control" value="" id="txtMobile" name="txtMobile"
                placeholder="Another input placeholder">
            </div>
            <div class="mb-3">
              <label for="formGroupExampleInput2" class="form-label">DOB</label>
              <input type="date" class="form-control" value="" id="txtDob" name="txtDob"
                placeholder="Another input placeholder">
            </div>
            <div class="mb-3">
              <label for="formGroupExampleInput2" class="form-label">Gender</label>
              <input type="text" class="form-control" value="" id="txtGen" name="txtGen"
                placeholder="Another input placeholder">
            </div>
            <div class="mb-3">
              <label for="formGroupExampleInput2" class="form-label">City</label>
              <input type="text" class="form-control" value="" id="txtCity" name="txtCity"
                placeholder="Another input placeholder">
            </div>
            <div class="mb-3">
              <label for="formGroupExampleInput2" class="form-label">Address</label>
              <input type="text" class="form-control" value="" id="txtAdd" name="txtAdd"
                placeholder="Another input placeholder">
            </div>

            <div class="row">
              <div class="col-md-6">
                <input type="file" onchange="doPrev(this,imgPrev)" id="txtPic" accept="image/*">
              </div>
              <div class="col-md-6">
                <img src="" id="imgPrev" alt="" width="100" height="100">
              </div>
            </div>
            
        </div>


        <div class="col-12 mt-1">
          <center>


            <button type="submit" class="btn btn-primary" id="save-server" formaction="/saved-to-server">Save to
              server</button>
            <button type="submit" class="btn btn-primary" id="update">Update</button>
          </center>
        </div>
        </form>
      </div>
    </div>
    </div>
  </body>

</html>